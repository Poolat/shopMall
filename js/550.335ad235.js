"use strict";(self["webpackChunkhm_shopping"]=self["webpackChunkhm_shopping"]||[]).push([[550],{2776:function(t,e,s){s.d(e,{C:function(){return i},JN:function(){return r},Re:function(){return a},Ud:function(){return o},t2:function(){return n}});var d=s(5720);const a=()=>d.A.get("/address/list"),n=(t,e,s,a)=>d.A.post("/address/add",{form:{name:t,phone:e,region:s,detail:a}}),i=t=>d.A.post("/address/remove",{addressId:t}),r=()=>d.A.get("/region/tree"),o=()=>d.A.get("/address/defaultId")},4550:function(t,e,s){s.r(e),s.d(e,{default:function(){return f}});s(4114);var d=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"top"},[e("van-nav-bar",{attrs:{title:"收获地址",fixed:"","left-arrow":""},on:{"click-left":function(e){return t.$router.go(-1)}}}),e("div",{staticClass:"poo",on:{click:function(e){return t.$router.push("/test")}}},[t._v("测试")]),e("van-icon",{staticClass:"delete",attrs:{name:"delete-o",color:"#1989fa",size:"3rem"},on:{click:t.onDelete}})],1),e("div",{staticClass:"address"},[e("van-address-list",{attrs:{list:t.addList,"default-tag-text":"默认","add-button-text":"添加新地址","disabled-list":t.disabledList,"disabled-text":"以下地址超出配送范围"},on:{add:t.onAdd,edit:t.onEdit,select:t.onSelect},model:{value:t.Id,callback:function(e){t.Id=e},expression:"Id"}})],1)])},a=[],n=(s(1860),s(1981)),i=(s(8111),s(1701),s(3518)),r=s(2776),o={name:"MallAddress",data(){return{list:["1","2"],Id:"1",defaultId:"",flag:!1,addList:[],disabledList:[{id:"3",name:"帅哥梁",tel:"1320000000",address:"上海市浦东新区汤臣一品"}]}},async created(){this.getAddress(),this.getDefa()},computed:{...(0,i.aH)("str",["prodetailStr"]),selectAddress(){return this.addList},longAddress(){const t=this.selectAddress.region;return t.province+t.city+t.region+this.selectAddress.detail},queryDefault(){return this.$route.query.flag}},methods:{onAdd(){this.$router.push("/add")},async onEdit(t,e){this.$dialog.confirm({title:"温馨提示",message:"你确认要删除该项吗？"}).then((async()=>{this.onDelete(t.addressId),await this.getAddress()})).catch((()=>{}))},onSelect(t,e){console.log(t),console.log(e);const s=this.prodetailStr+`&target=${e}`;this.$router.replace(`/pay?${s}`)},async onDelete(t){const e=await(0,r.C)(t);200===e.message&&(0,n.A)("删除成功")},async getDefa(){const{data:{defaultId:t}}=await(0,r.Ud)();this.defaultId=t},async getAddress(){const{data:{list:t}}=await(0,r.Re)();this.addList=t.map(((t,e)=>({id:`${e+1}`,name:t.name,tel:t.phone,address:t.region.province+t.region.city+t.region.region+t.detail,isDefault:this.defaultId===t.address_id,addressId:t.address_id})))}}},l=o,c=s(1656),u=(0,c.A)(l,d,a,!1,null,"a853357c",null),f=u.exports}}]);
//# sourceMappingURL=550.335ad235.js.map