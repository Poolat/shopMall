{"version":3,"file":"js/550.335ad235.js","mappings":"mQAGO,MAAMA,EAAiBA,IACrBC,EAAAA,EAAQC,IAAI,iBAIRC,EAAmBA,CAACC,EAAMC,EAAOC,EAAQC,IAC7CN,EAAAA,EAAQO,KAAK,eAAgB,CAClCC,KAAM,CACJL,OACAC,QACAC,SACAC,YAMOG,EAAaC,GACjBV,EAAAA,EAAQO,KAAK,kBAAmB,CACrCG,cAKSC,EAAYA,IAChBX,EAAAA,EAAQC,IAAI,gBAIRW,EAAaA,IACjBZ,EAAAA,EAAQC,IAAI,qB,gFCjCjBY,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACA,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,cAAc,CAACG,MAAM,CAAC,MAAQ,OAAO,MAAQ,GAAG,aAAa,IAAIC,GAAG,CAAC,aAAa,SAASC,GAAQ,OAAOP,EAAIQ,QAAQC,IAAI,EAAE,KAAKP,EAAG,MAAM,CAACE,YAAY,MAAME,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOP,EAAIQ,QAAQE,KAAK,QAAQ,IAAI,CAACV,EAAIW,GAAG,QAAQT,EAAG,WAAW,CAACE,YAAY,SAASC,MAAM,CAAC,KAAO,WAAW,MAAQ,UAAU,KAAO,QAAQC,GAAG,CAAC,MAAQN,EAAIY,aAAa,GAAGV,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,mBAAmB,CAACG,MAAM,CAAC,KAAOL,EAAIa,QAAQ,mBAAmB,KAAK,kBAAkB,QAAQ,gBAAgBb,EAAIc,aAAa,gBAAgB,cAAcR,GAAG,CAAC,IAAMN,EAAIe,MAAM,KAAOf,EAAIgB,OAAO,OAAShB,EAAIiB,UAAUC,MAAM,CAACC,MAAOnB,EAAIoB,GAAIC,SAAS,SAAUC,GAAMtB,EAAIoB,GAAGE,CAAG,EAAEC,WAAW,SAAS,IAC1yB,EACIC,EAAkB,G,0DCiCtB,GACAnC,KAAA,cACAoC,IAAAA,GACA,OACAC,KAAA,UACAN,GAAA,IACAO,UAAA,GACAC,MAAA,EACAf,QAAA,GACAC,aAAA,CACA,CACAe,GAAA,IACAxC,KAAA,MACAyC,IAAA,aACAC,QAAA,gBAIA,EACA,aAAAC,GACA,KAAAC,aACA,KAAAC,SACA,EACAC,SAAA,KACAC,EAAAA,EAAAA,IAAA,wBACAC,aAAAA,GACA,YAAAxB,OACA,EACAyB,WAAAA,GACA,MAAA/C,EAAA,KAAA8C,cAAA9C,OACA,OAAAA,EAAAgD,SAAAhD,EAAAiD,KAAAjD,EAAAA,OAAA,KAAA8C,cAAA7C,MACA,EACAiD,YAAAA,GACA,YAAAC,OAAAC,MAAAf,IACA,GAEAgB,QAAA,CACA7B,KAAAA,GACA,KAAAP,QAAAE,KAAA,OACA,EAEA,YAAAM,CAAA6B,EAAAC,GAOA,KAAAC,QAAAC,QAAA,CACAC,MAAA,OACAC,QAAA,eAGAC,MAAA,UACA,KAAAvC,SAAAiC,EAAAjD,iBACA,KAAAqC,YAAA,IAEAmB,OAAA,QACA,EAEAnC,QAAAA,CAAA4B,EAAAC,GACAO,QAAAC,IAAAT,GACAQ,QAAAC,IAAAR,GACA,MAAAS,EAAA,KAAAC,aAAA,WAAAV,IACA,KAAAtC,QAAAiD,QAAA,QAAAF,IACA,EAEA,cAAA3C,CAAAhB,GACA,MAAA8D,QAAA/D,EAAAA,EAAAA,GAAAC,GACA,MAAA8D,EAAAR,UACAS,EAAAA,EAAAA,GAAA,OAEA,EACA,aAAAzB,GAEA,MAAAT,MAAA,UAAAE,UAAA7B,EAAAA,EAAAA,MACA,KAAA6B,UAAAA,CACA,EACA,gBAAAM,GAEA,MAAAR,MAAA,KAAAC,UAAAzC,EAAAA,EAAAA,MACA,KAAA4B,QAAAa,EAAAkC,KAAA,CAAAf,EAAAC,KAAA,CACAjB,GAAA,GAAAiB,EAAA,IACAzD,KAAAwD,EAAAxD,KACAyC,IAAAe,EAAAvD,MACAyC,QAAAc,EAAAtD,OAAAgD,SAAAM,EAAAtD,OAAAiD,KAAAK,EAAAtD,OAAAA,OAAAsD,EAAArD,OACAqE,UAAA,KAAAlC,YAAAkB,EAAAiB,WACAlE,UAAAiD,EAAAiB,cAEA,IC5H6P,I,UCQzPC,GAAY,OACd,EACAhE,EACAyB,GACA,EACA,KACA,WACA,MAIF,EAAeuC,EAAiB,O","sources":["webpack://hm-shopping/./src/api/address.js","webpack://hm-shopping/./src/views/address/index.vue","webpack://hm-shopping/src/views/address/index.vue","webpack://hm-shopping/./src/views/address/index.vue?12d6","webpack://hm-shopping/./src/views/address/index.vue?812f"],"sourcesContent":["import request from '@/utils/request'\r\n\r\n// 获取地址列表\r\nexport const getAddressList = () => {\r\n  return request.get('/address/list')\r\n}\r\n\r\n// 新增收获地址\r\nexport const getCreateAddress = (name, phone, region, detail) => {\r\n  return request.post('/address/add', {\r\n    form: {\r\n      name,\r\n      phone,\r\n      region,\r\n      detail\r\n    }\r\n  })\r\n}\r\n\r\n// 删除地址\r\nexport const getDelete = (addressId) => {\r\n  return request.post('/address/remove', {\r\n    addressId\r\n  })\r\n}\r\n\r\n// 获取省市区地址\r\nexport const getRegion = () => {\r\n  return request.get('/region/tree')\r\n}\r\n\r\n// 默认收货地址id\r\nexport const getDefault = () => {\r\n  return request.get('/address/defaultId')\r\n}\r\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('div',{staticClass:\"top\"},[_c('van-nav-bar',{attrs:{\"title\":\"收获地址\",\"fixed\":\"\",\"left-arrow\":\"\"},on:{\"click-left\":function($event){return _vm.$router.go(-1)}}}),_c('div',{staticClass:\"poo\",on:{\"click\":function($event){return _vm.$router.push('/test')}}},[_vm._v(\"测试\")]),_c('van-icon',{staticClass:\"delete\",attrs:{\"name\":\"delete-o\",\"color\":\"#1989fa\",\"size\":\"3rem\"},on:{\"click\":_vm.onDelete}})],1),_c('div',{staticClass:\"address\"},[_c('van-address-list',{attrs:{\"list\":_vm.addList,\"default-tag-text\":\"默认\",\"add-button-text\":\"添加新地址\",\"disabled-list\":_vm.disabledList,\"disabled-text\":\"以下地址超出配送范围\"},on:{\"add\":_vm.onAdd,\"edit\":_vm.onEdit,\"select\":_vm.onSelect},model:{value:(_vm.Id),callback:function ($$v) {_vm.Id=$$v},expression:\"Id\"}})],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div>\r\n        <div class=\"top\">\r\n            <van-nav-bar\r\n                title=\"收获地址\"\r\n                fixed\r\n                left-arrow\r\n                @click-left=\"$router.go(-1)\"\r\n            />\r\n          <div class=\"poo\" @click=\"$router.push('/test')\">测试</div>\r\n          <van-icon @click=\"onDelete\" name=\"delete-o\" class=\"delete\" color=\"#1989fa\"  size=\"3rem\"/>\r\n        </div>\r\n        <div class=\"address\">\r\n          <van-address-list\r\n            v-model=\"Id\"\r\n            :list=\"addList\"\r\n            default-tag-text=\"默认\"\r\n            add-button-text=\"添加新地址\"\r\n            @add=\"onAdd\"\r\n            @edit=\"onEdit\"\r\n            @select=\"onSelect\"\r\n            :disabled-list=\"disabledList\"\r\n            disabled-text=\"以下地址超出配送范围\"\r\n         />\r\n         <!--\r\n          扩展功能\r\n         -->\r\n      </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { Toast } from 'vant'\r\nimport { mapState } from 'vuex'\r\nimport { getAddressList, getDefault, getDelete } from '@/api/address'\r\nexport default {\r\n  name: 'MallAddress',\r\n  data () {\r\n    return {\r\n      list: ['1', '2'],\r\n      Id: '1',\r\n      defaultId: '',\r\n      flag: false,\r\n      addList: [],\r\n      disabledList: [\r\n        {\r\n          id: '3',\r\n          name: '帅哥梁',\r\n          tel: '1320000000',\r\n          address: '上海市浦东新区汤臣一品'\r\n        }\r\n      ]\r\n    }\r\n  },\r\n  async created () {\r\n    this.getAddress()\r\n    this.getDefa()\r\n  },\r\n  computed: {\r\n    ...mapState('str', ['prodetailStr']),\r\n    selectAddress () {\r\n      return this.addList\r\n    },\r\n    longAddress () {\r\n      const region = this.selectAddress.region\r\n      return region.province + region.city + region.region + this.selectAddress.detail\r\n    },\r\n    queryDefault () {\r\n      return this.$route.query.flag\r\n    }\r\n  },\r\n  methods: {\r\n    onAdd () {\r\n      this.$router.push('/add')\r\n    },\r\n    // 点击编辑按钮的回调函数 返回值\r\n    async onEdit (item, index) {\r\n      // address:'上海上海市徐汇区风格的'\r\n      // addressId:20162\r\n      // id:'1'\r\n      // isDefault:true\r\n      // name:'梁俊鹏'\r\n      // tel:'13794712382'\r\n      this.$dialog.confirm({\r\n        title: '温馨提示',\r\n        message: '你确认要删除该项吗？'\r\n      })\r\n        // 确认删除提示框\r\n        .then(async () => {\r\n          this.onDelete(item.addressId)\r\n          await this.getAddress()\r\n        })\r\n        .catch(() => {})\r\n    },\r\n    // 切换不同选项的函数值\r\n    onSelect (item, index) {\r\n      console.log(item)\r\n      console.log(index)\r\n      const str = this.prodetailStr + `&target=${index}`\r\n      this.$router.replace(`/pay?${str}`)\r\n    },\r\n    // 点击删除时执行的异步代码\r\n    async onDelete (addressId) {\r\n      const res = await getDelete(addressId)\r\n      if (res.message === 200) {\r\n        Toast('删除成功')\r\n      }\r\n    },\r\n    async getDefa () {\r\n      // 获取当前默认项id\r\n      const { data: { defaultId } } = await getDefault()\r\n      this.defaultId = defaultId\r\n    },\r\n    async getAddress () {\r\n      // 获取地址的渲染函数\r\n      const { data: { list } } = await getAddressList()\r\n      this.addList = list.map((item, index) => ({\r\n        id: `${index + 1}`,\r\n        name: item.name,\r\n        tel: item.phone,\r\n        address: item.region.province + item.region.city + item.region.region + item.detail,\r\n        isDefault: this.defaultId === item.address_id,\r\n        addressId: item.address_id\r\n      }))\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .top{\r\n    height: 48px;\r\n    width: 100%;\r\n    border-bottom: 2px solid #e3e3e3;\r\n    .poo{\r\n      float: right;\r\n      position: relative;\r\n      z-index: 999;\r\n      right: 0;\r\n    height: auto;\r\n    width: 20px;\r\n    background-color: #a9e6c8;\r\n  }\r\n  .delete{\r\n    position: relative;\r\n    z-index: 999;\r\n    float: right;\r\n    :before{\r\n      width: 100px;\r\n      height: 100px;\r\n    }\r\n\r\n  }\r\n  }\r\n\r\n</style>\r\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=a853357c&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=a853357c&prod&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a853357c\",\n  null\n  \n)\n\nexport default component.exports"],"names":["getAddressList","request","get","getCreateAddress","name","phone","region","detail","post","form","getDelete","addressId","getRegion","getDefault","render","_vm","this","_c","_self","staticClass","attrs","on","$event","$router","go","push","_v","onDelete","addList","disabledList","onAdd","onEdit","onSelect","model","value","Id","callback","$$v","expression","staticRenderFns","data","list","defaultId","flag","id","tel","address","created","getAddress","getDefa","computed","mapState","selectAddress","longAddress","province","city","queryDefault","$route","query","methods","item","index","$dialog","confirm","title","message","then","catch","console","log","str","prodetailStr","replace","res","_Toast","map","isDefault","address_id","component"],"sourceRoot":""}